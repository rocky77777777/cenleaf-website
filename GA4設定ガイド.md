# Google Analytics 4 設定ガイド

## 🎯 実施した内容

### 1. トラッキングコード用JSファイルの作成
- **ファイル**: `/assets/js/analytics.js`
- **機能**:
  - ページビューの自動追跡
  - スクロール深度の測定（25%, 50%, 75%, 100%）
  - 外部リンククリックの追跡
  - CTAボタンクリックの追跡
  - フォーム送信の追跡

### 2. 各HTMLファイルへの組み込み
以下のファイルにGA4トラッキングコードを追加済み：
- `index.html`（メインページ）
- `mobile-advanced.html`（モバイル版）
- `billreceipro.html`（領収書発行ツール）
- `tokutei.html`（特定商取引法ページ）

### 3. プライバシーポリシーページの作成
- **ファイル**: `/pages/privacy-policy.html`
- Google Analytics使用について明記
- Cookie使用について説明
- オプトアウト方法のリンク付き

## 📋 設定手順

### ステップ1: Google Analytics 4アカウントの作成

1. [Google Analytics](https://analytics.google.com/)にアクセス
2. Googleアカウントでログイン
3. 「測定を開始」をクリック
4. 以下の情報を入力：
   - **アカウント名**: CENLEAF または お好きな名前
   - **アカウントのデータ共有設定**: デフォルトのままでOK

### ステップ2: プロパティの設定

1. **プロパティ名**: cenleaf.com
2. **レポートのタイムゾーン**: 日本
3. **通貨**: 日本円（JPY）
4. 「次へ」をクリック

### ステップ3: ビジネス情報

1. **業種**: コンサルティング または 教育
2. **ビジネスの規模**: 小（従業員1〜10名）
3. **利用目的**: 
   - サイトまたはアプリの利用状況を測定する
   - コンバージョンを最適化する
   - ユーザー行動を理解する

### ステップ4: データストリームの作成

1. **プラットフォーム**: ウェブを選択
2. **ウェブサイトのURL**: https://cenleaf.com
3. **ストリーム名**: CENLEAF メインサイト
4. 「ストリームを作成」をクリック

### ステップ5: 測定IDの取得と設定

1. 作成されたデータストリームの詳細画面で「測定ID」をコピー
   - 形式: `G-XXXXXXXXXX`（Gで始まる10文字程度の英数字）

2. `/assets/js/analytics.js`ファイルを編集：
   ```javascript
   const GA_MEASUREMENT_ID = 'G-XXXXXXXXXX'; // ← ここに測定IDを入力
   ```

## ✅ 動作確認方法

### 方法1: リアルタイムレポートで確認

1. Google Analyticsにログイン
2. 左メニューから「レポート」→「リアルタイム」を選択
3. cenleaf.comにアクセス
4. リアルタイムユーザー数が「1」と表示されれば成功

### 方法2: ブラウザの開発者ツールで確認

1. cenleaf.comを開く
2. F12キーで開発者ツールを開く
3. Consoleタブを選択
4. 「Google Analytics 4 initialized with ID: G-XXXXXXXXXX」と表示されれば成功

### 方法3: Google Tag Assistant で確認

1. Chrome拡張機能「[Tag Assistant Legacy](https://chrome.google.com/webstore/detail/tag-assistant-legacy-by-g/kejbdjndbnbjgmefkgdddjlbokphdefk)」をインストール
2. cenleaf.comにアクセス
3. 拡張機能アイコンをクリック
4. GA4タグが検出されれば成功

## 📊 取得できるデータ

### 基本データ
- ページビュー数
- ユニークユーザー数
- セッション数
- 直帰率
- 平均セッション時間

### カスタムイベント
- **scroll**: スクロール深度（25%, 50%, 75%, 100%）
- **click**: 外部リンククリック
- **generate_lead**: CTAボタンクリック
- **form_submit**: フォーム送信

### ユーザー属性
- デバイス種別（PC/モバイル/タブレット）
- ブラウザ情報
- 地域情報
- 参照元/メディア

## 🔧 追加カスタマイズ

### コンバージョン設定
1. GA4管理画面で「イベント」→「コンバージョン」
2. 重要なイベント（例：form_submit）をコンバージョンとしてマーク

### カスタムディメンション
必要に応じて、以下のようなカスタムディメンションを追加可能：
- ログイン状態
- 会員種別
- コンテンツカテゴリ

### Eコマース測定
商品販売がある場合は、Eコマースイベントの実装も可能

## 📝 注意事項

1. **プライバシー対応**
   - プライバシーポリシーページを必ず設置（作成済み）
   - Cookie使用について明記（対応済み）

2. **パフォーマンス**
   - GA4スクリプトは非同期で読み込まれるため、サイト表示速度への影響は最小限

3. **データ保持期間**
   - デフォルトは14ヶ月（管理画面から変更可能）

4. **IPアドレスの匿名化**
   - GA4ではデフォルトで匿名化されています

## 🚀 次のステップ

1. 測定IDを取得して設定
2. FTPまたはGitHubでファイルをアップロード
3. 動作確認
4. 1週間後にデータを確認して改善点を検討

## サポート

設定でお困りの場合は、以下をご確認ください：
- [Google Analytics ヘルプ](https://support.google.com/analytics)
- [GA4 設定ガイド](https://support.google.com/analytics/answer/9304153)

---
最終更新: 2025年8月20日